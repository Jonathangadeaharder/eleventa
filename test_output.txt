============================= test session starts =============================
platform win32 -- Python 3.10.0, pytest-8.3.5, pluggy-1.5.0 -- C:\Users\Jonandrop\Documents\eleventa\venv\Scripts\python.exe
cachedir: .pytest_cache
PySide6 6.9.0 -- Qt runtime 6.9.0 -- Qt compiled 6.9.0
rootdir: C:\Users\Jonandrop\Documents\eleventa
configfile: pytest.ini
plugins: mock-3.14.0, qt-4.4.0
collecting ... collected 1 item

tests/ui/test_product_dialog.py::test_state_change_control_stock FAILED  [100%]

================================== FAILURES ===================================
_______________________ test_state_change_control_stock _______________________

qtbot = <pytestqt.qtbot.QtBot object at 0x000001880F7D8E50>
dialog_add_mode = <ui.dialogs.product_dialog.ProductDialog(0x1880ed058a0) at 0x000001880F7EDB00>

    def test_state_change_control_stock(qtbot, dialog_add_mode):
        # Uncheck "Controlar Stock" y verifica que los campos de stock est�n ocultos
        dialog_add_mode.inventory_checkbox.setChecked(False)
        qtbot.wait(10)
        assert not dialog_add_mode.stock_input.isVisible()
        assert not dialog_add_mode.min_stock_input.isVisible()
        # Check "Controlar Stock" y verifica que los campos de stock est�n visibles
        dialog_add_mode.inventory_checkbox.setChecked(True)
        qtbot.wait(10)
>       assert dialog_add_mode.stock_input.isVisible()
E       assert False
E        +  where False = <built-in method isVisible of PySide6.QtWidgets.QDoubleSpinBox object at 0x000001880F835DC0>()
E        +    where <built-in method isVisible of PySide6.QtWidgets.QDoubleSpinBox object at 0x000001880F835DC0> = <PySide6.QtWidgets.QDoubleSpinBox(0x1880fb795e0) at 0x000001880F835DC0>.isVisible
E        +      where <PySide6.QtWidgets.QDoubleSpinBox(0x1880fb795e0) at 0x000001880F835DC0> = <ui.dialogs.product_dialog.ProductDialog(0x1880ed058a0) at 0x000001880F7EDB00>.stock_input

tests\ui\test_product_dialog.py:104: AssertionError
---------------------------- Captured stdout setup ----------------------------

=== Creating test engine with URL: sqlite:///:memory: ===

=== Fixture 'setup_test_database' starting... ===
Verifying mapping for 13 models...
Tables currently in Base.metadata: ['users', 'departments', 'products', 'inventory_movements', 'sales', 'sale_items', 'customers', 'credit_payments', 'suppliers', 'purchase_orders', 'purchase_order_items', 'invoices', 'cash_drawer_entries']
  - Model UserOrm correctly mapped to table 'users'
  - Model DepartmentOrm correctly mapped to table 'departments'
  - Model ProductOrm correctly mapped to table 'products'
  - Model InventoryMovementOrm correctly mapped to table 'inventory_movements'
  - Model SaleOrm correctly mapped to table 'sales'
  - Model SaleItemOrm correctly mapped to table 'sale_items'
  - Model CustomerOrm correctly mapped to table 'customers'
  - Model CreditPaymentOrm correctly mapped to table 'credit_payments'
  - Model SupplierOrm correctly mapped to table 'suppliers'
  - Model PurchaseOrderOrm correctly mapped to table 'purchase_orders'
  - Model PurchaseOrderItemOrm correctly mapped to table 'purchase_order_items'
  - Model InvoiceOrm correctly mapped to table 'invoices'
  - Model CashDrawerEntryOrm correctly mapped to table 'cash_drawer_entries'
Successfully verified 13 models mapped to 13 tables in Base.metadata.
Attempting to create tables on engine: sqlite:///:memory:
Verifying mapping for 13 models...
Tables currently in Base.metadata: ['users', 'departments', 'products', 'inventory_movements', 'sales', 'sale_items', 'customers', 'credit_payments', 'suppliers', 'purchase_orders', 'purchase_order_items', 'invoices', 'cash_drawer_entries']
  - Model UserOrm correctly mapped to table 'users'
  - Model DepartmentOrm correctly mapped to table 'departments'
  - Model ProductOrm correctly mapped to table 'products'
  - Model InventoryMovementOrm correctly mapped to table 'inventory_movements'
  - Model SaleOrm correctly mapped to table 'sales'
  - Model SaleItemOrm correctly mapped to table 'sale_items'
  - Model CustomerOrm correctly mapped to table 'customers'
  - Model CreditPaymentOrm correctly mapped to table 'credit_payments'
  - Model SupplierOrm correctly mapped to table 'suppliers'
  - Model PurchaseOrderOrm correctly mapped to table 'purchase_orders'
  - Model PurchaseOrderItemOrm correctly mapped to table 'purchase_order_items'
  - Model InvoiceOrm correctly mapped to table 'invoices'
  - Model CashDrawerEntryOrm correctly mapped to table 'cash_drawer_entries'
Successfully verified 13 models mapped to 13 tables in Base.metadata.
Creating all database tables with 13 tables registered...
Database tables created successfully.
Test database tables created successfully.
Toggle inventory fields - state type: <class 'bool'>, value: True
Visibility will be set to: True
---------------------------- Captured stdout call -----------------------------
Toggle inventory fields - state type: <class 'int'>, value: 0
Visibility will be set to: False
Toggle inventory fields - state type: <class 'int'>, value: 2
Visibility will be set to: True
-------------------------- Captured stdout teardown ---------------------------

=== Fixture 'setup_test_database' tearing down (dropping tables)... ===
Test database tables dropped.

=== Disposing test engine ===
=========================== short test summary info ===========================
FAILED tests/ui/test_product_dialog.py::test_state_change_control_stock - ass...
============================== 1 failed in 0.21s ==============================
